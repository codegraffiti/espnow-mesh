# Coordinator configuration for espnow_mesh v2.0
# This YAML configures the Coordinator device running on a Lolin32 Lite board
# It manages the mesh network and connects to Home Assistant (HA) via Wi-Fi
# Includes an onboard LED (GPIO22) to indicate mesh network activity (data sent/received)

esphome:
  name: "espnow_coordinator"  # Unique name for this device in HA - adjust if multiple Coordinators
  platform: ESP32             # Required - specifies ESP32 platform for ESP-NOW and Wi-Fi
  board: lolin32_lite         # Default board - Lolin32 Lite with onboard LED on GPIO22

espnow_mesh:
  role: coordinator           # Required - designates this device as the Coordinator
  network_id: 0x1234          # Optional - 16-bit network ID (hex/decimal, 0x0000-0xFFFF)
                              # Default: Randomly generated by C++ if omitted

wifi:
  ssid: "your-ssid"           # Required - Wi-Fi network name for HA uplink
  password: "your-password"   # Required - Wi-Fi password for secure connection

# Output configuration for onboard LED (GPIO22) to indicate mesh network activity
output:
  - platform: gpio            # Use GPIO platform for controlling the onboard LED
    pin:
      number: GPIO22          # GPIO22 - onboard LED pin on Lolin32 Lite
      inverted: true          # Invert logic (true = LED on when LOW, typical for Lolin32 Lite)
    id: activity_led          # Unique ID for referencing this output

# Light component to control the LED for network activity
light:
  - platform: binary          # Binary light (on/off) to indicate activity
    name: "Mesh Activity LED" # Friendly name for HA UI
    output: activity_led      # Link to the GPIO22 output defined above
    id: mesh_activity_light   # Unique ID for this light entity
    restore_mode: ALWAYS_OFF  # Default to off on reboot, activity triggers it

# Optional: Logging configuration (uncomment to enable detailed logs)
# logger:
#   level: DEBUG             # Options: NONE, ERROR, WARN, INFO, DEBUG, VERBOSE
#   baud_rate: 115200        # Serial baud rate for debugging

# Optional: OTA updates (uncomment to enable remote firmware updates)
# ota:
#   password: "your-ota-password"  # Password for secure OTA access
